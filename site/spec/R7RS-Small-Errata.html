<!DOCTYPE html>
<html lang="en"><head><title>R7RS-Small Errata</title><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="R7RS-Small Errata"/><meta property="og:description" content="From github.com/johnwcowan/r7rs-work/blob/master/R7RSSmallErrata.md Errata from the final draft of R7RS. This list is unofficial. In Section 3.1 (Variables, syntactic keywords, and regions), the claim in paragraph 2 that all variable binding constructs can be explained in terms of lambda does not apply to top-level bindings."/><meta property="og:image" content="https://hello.nickmain.com/r7rs/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../static/icon.png"/><meta name="description" content="From github.com/johnwcowan/r7rs-work/blob/master/R7RSSmallErrata.md Errata from the final draft of R7RS. This list is unofficial. In Section 3.1 (Variables, syntactic keywords, and regions), the claim in paragraph 2 that all variable binding constructs can be explained in terms of lambda does not apply to top-level bindings."/><meta name="generator" content="Quartz"/><link href="../index.css" rel="stylesheet" type="text/css" spa-preserve/><script src="../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("../static/contentIndex.json").then(data => data.json())</script></head><body data-slug="spec/R7RS-Small-Errata"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h1 class="page-title"><a href="..">Scheme</a></h1><div class="spacer mobile-only"></div><div class="search"><div id="search-icon"><p>Search</p><div></div><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search</title><desc id="desc">Search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></div><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="search-layout" data-preview="true"></div></div></div></div><div class="darkmode"><input class="toggle" id="darkmode-toggle" type="checkbox" tabindex="-1"/><label id="toggle-label-light" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg></label><label id="toggle-label-dark" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></label></div><div class="explorer desktop-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;spec&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;spec/concepts&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;spec/formal&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;spec/formal/syntax&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;spec/overview&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;spec/procedures&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;spec/procedures/io&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;spec/procedures/io/input&quot;,&quot;collapsed&quot;:true}]"><h1>Explorer</h1><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div class="folder-outer "><ul style="padding-left:0;" class="content" data-folderul></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="spec"><button class="folder-button"><span class="folder-title">spec</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="spec"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="spec/concepts"><button class="folder-button"><span class="folder-title">concepts</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="spec/concepts"><li><a href="../spec/concepts/Proper-Tail-Recursion" data-for="spec/concepts/Proper-Tail-Recursion">Proper Tail Recursion</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="spec/formal"><button class="folder-button"><span class="folder-title">formal</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="spec/formal"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="spec/formal/syntax"><button class="folder-button"><span class="folder-title">syntax</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="spec/formal/syntax"><li><a href="../spec/formal/syntax/Expressions" data-for="spec/formal/syntax/Expressions">Expressions</a></li><li><a href="../spec/formal/syntax/External-Representations" data-for="spec/formal/syntax/External-Representations">External Representations</a></li><li><a href="../spec/formal/syntax/Lexical-Structure" data-for="spec/formal/syntax/Lexical-Structure">Lexical Structure</a></li><li><a href="../spec/formal/syntax/Libraries" data-for="spec/formal/syntax/Libraries">Libraries</a></li><li><a href="../spec/formal/syntax/Programs-and-Definitions" data-for="spec/formal/syntax/Programs-and-Definitions">Programs and Definitions</a></li><li><a href="../spec/formal/syntax/Quasiquotations" data-for="spec/formal/syntax/Quasiquotations">Quasiquotations</a></li><li><a href="../spec/formal/syntax/Transformers" data-for="spec/formal/syntax/Transformers">Transformers</a></li></ul></div></li><li><a href="../spec/formal/Derived-Expression-Types" data-for="spec/formal/Derived-Expression-Types">Derived Expression Types</a></li><li><a href="../spec/formal/Formal-Semantics" data-for="spec/formal/Formal-Semantics">Formal Semantics</a></li><li><a href="../spec/formal/Formal-Syntax" data-for="spec/formal/Formal-Syntax">Formal Syntax</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="spec/overview"><button class="folder-button"><span class="folder-title">overview</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="spec/overview"><li><a href="../spec/overview/Notation-and-Terminology" data-for="spec/overview/Notation-and-Terminology">Notation and Terminology</a></li><li><a href="../spec/overview/Semantics" data-for="spec/overview/Semantics">Semantics</a></li><li><a href="../spec/overview/Syntax" data-for="spec/overview/Syntax">Syntax</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="spec/procedures"><button class="folder-button"><span class="folder-title">procedures</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="spec/procedures"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="spec/procedures/io"><button class="folder-button"><span class="folder-title">io</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="spec/procedures/io"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="spec/procedures/io/input"><button class="folder-button"><span class="folder-title">input</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="spec/procedures/io/input"><li><a href="../spec/procedures/io/input/Read" data-for="spec/procedures/io/input/Read">Read</a></li></ul></div></li></ul></div></li><li><a href="../spec/procedures/Control-Features" data-for="spec/procedures/Control-Features">Control Features</a></li></ul></div></li><li><a href="../spec/Formal-Syntax-and-Semantics" data-for="spec/Formal-Syntax-and-Semantics">Formal Syntax and Semantics</a></li><li><a href="../spec/Overview-of-Scheme" data-for="spec/Overview-of-Scheme">Overview of Scheme</a></li><li><a href="../spec/R7RS-Small-Errata" data-for="spec/R7RS-Small-Errata">R7RS-Small Errata</a></li><li><a href="../spec/R7RS-Small-Specification" data-for="spec/R7RS-Small-Specification">R7RS-Small Specification</a></li></ul></div></li></ul></div></li><li id="explorer-end"></li></ul></div></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../spec/">spec</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>R7RS-Small Errata</a></div></nav><h1 class="article-title">R7RS-Small Errata</h1></div></div><article class="popover-hint"><p>From <a href="https://github.com/johnwcowan/r7rs-work/blob/master/R7RSSmallErrata.md" class="external">https://github.com/johnwcowan/r7rs-work/blob/master/R7RSSmallErrata.md<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>Errata from the <a href="../attachments/r7rs.pdf" class="internal alias" data-slug="attachments/r7rs.pdf">final draft of R7RS</a>.  This list is unofficial.</p>
<ol>
<li>
<p>In Section 3.1 (Variables, syntactic keywords, and regions), the claim in paragraph 2 that all variable binding constructs can be explained in terms of <code>lambda</code> does not apply to top-level bindings.</p>
</li>
<li>
<p>Section 7.1.5 (Transformers) doesn’t make it clear that a top-level <code>syntax-rules</code> pattern must be a list pattern, not a vector pattern or an identifier pattern.</p>
</li>
<li>
<p>In Section 6.3 (Booleans), the procedure <code>boolean=?</code> is defined to return <code>#t</code> if the arguments are all booleans and are either all <code>#t</code> or all <code>#f</code>.  The words “are all booleans and” incorrectly suggest that the value is <code>#f</code> if at least one argument is not a boolean.  In fact it is an error to apply <code>boolean=?</code> to non-booleans.</p>
</li>
<li>
<p>In Section 4.1.2 (Literal expressions), the examples <code>'#</code> and <code>#</code> should be <code>'#\a</code> and <code>#\a</code> respectively.</p>
</li>
<li>
<p>In section 7.1.1 (Lexical structure), the escape sequence <code>\|</code> is not shown as permitted in string-element. The list in Section 6.7 shows that it is equivalent to <code>|</code>.  Similarly, the escape sequences <code>\&quot;</code> and <code>\\</code> should be allowed in symbol-element.  This makes the same escape sequences valid in both strings and symbols.</p>
</li>
<li>
<p>In Section 7.3 (Derived expression types), the syntax-rules definition of <code>case</code> is incorrect; the fourth syntax rule must be moved after the fifth to avoid an improper match against the fourth rule when <code>=></code> is present.  Here is the correct version:</p>
</li>
</ol>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="scheme" data-theme="github-light github-dark"><code data-language="scheme" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">define-syntax</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> case</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">syntax-rules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> =>)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (key ...)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        clauses ...)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((atom-key (key ...)))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> atom-key clauses ...)))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> => result))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (result key))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result1 result2 ...))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result1 result2 ...))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ((atoms ...) => result))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">memv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(atoms ...))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          (result key)))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ((atoms ...) => result)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        clause clauses ...)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">memv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(atoms ...))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          (result key)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key clause clauses ...)))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ((atoms ...) result1 result2 ...))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">memv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(atoms ...))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result1 result2 ...)))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ((atoms ...) result1 result2 ...)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        clause clauses ...)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">memv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(atoms ...))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result1 result2 ...)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key clause clauses ...)))))</span></span></code></pre></figure>
<ol start="7">
<li>
<p>In Section 7.1.1, the lexical rule special-initial incorrectly omits <code>@</code>.</p>
</li>
<li>
<p>Bibliographic reference ![13] should link to <a href="https://srfi.schemers.org/srfi-4/srfi-4.html" class="external">SRFI 4<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>.</p>
</li>
<li>
<p>In section 4.2.2, add “interleaving evaluations with assignments” to the definition of <code>letrec*</code>. Replace the meaningless example with this:</p>
</li>
</ol>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="scheme" data-theme="github-light github-dark"><code data-language="scheme" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">;; Returns the arithmetic, geometric, and</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">;; harmonic means of a nested list of numbers</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">define</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">means</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ton)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  (letrec*</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     ((mean</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">f g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          (f (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (sum g ton) n))))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (sum</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">g ton</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ton)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            (+)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">number?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ton)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                (g ton)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (sum g (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">car</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ton))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                   (sum g (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cdr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ton)))))))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (n (sum (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) 1) ton)))</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (values (mean values values)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            (mean </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> log)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            (mean </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /))))</span></span></code></pre></figure>
<p>Note that evaluating <code>(means '(3 (1 4)))</code> returns three values: 8/3, 2.28942848510666 (approximately), and 36/19.</p>
<ol start="10">
<li>
<p>In section 7.1.5, add <code>bytevector</code> to the alternatives for the pattern-datum rule.</p>
</li>
<li>
<p>Section 1.3.4 refers to “the initial environment” containing <code>*</code>, which is not true for programs. It should refer instead to “an environment containing the base library”.</p>
</li>
<li>
<p>An example in section 5.3.3 refers to <code>integer-sqrt</code> instead of <code>exact-integer-sqrt</code>.</p>
</li>
<li>
<p>In section 4.3.1, the body of a <code>let-syntax</code> expression is said to contain “one or more definitions”; it should be “zero or more definitions”.</p>
</li>
<li>
<p>In section 6.6 for <code>char-upcase/downcase/foldcase</code> and 6.7 for <code>string-upcase/downcase/foldcase</code> the reader is referred to UAX #29, but it should be TR #44.</p>
</li>
<li>
<p>In section 7.3, the definition of <code>case-lambda</code> should use <code>letrec-syntax</code>, not <code>let-syntax</code>.</p>
</li>
<li>
<p>In section 4.3.2 (but not in 7.1.3), change &lt;literal> to &lt;pattern literal> to avoid confusion.</p>
</li>
<li>
<p>(removed, already in R7RS-small)</p>
</li>
<li>
<p>In the first bullet of the “Incompatibilities with R6RS” section, for “have to be be” read “have to be”.</p>
</li>
<li>
<p>In numeric tower bullet of the “Incompatibilities with R6RS” section, for “but the R6RS procedures <code>real-valued?</code>, <code>rational-valued?</code>, and <code>integer-valued?</code> were not” read “but the semantics of the R6RS procedures <code>real?</code>, <code>rational?</code>, and <code>integer?</code> were not adopted.  (Note that the R5RS/R7RS semantics are available in R6RS using <code>real-valued?</code>, <code>rational-valued?</code>, and <code>integer-valued?</code>)“.</p>
</li>
<li>
<p>From <a href="http://www.mumble.net/~kelsey/r5rs-errata.html" class="external">Richard Kelsey’s R5RS errata<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>: In the explanation of <code>list-ref</code>, for “fewer than <em>k</em> elements”, read “<em>k</em> or fewer elements”. Thus, <code>(list-ref '(x) 1)</code> is an error.</p>
</li>
<li>
<p>In Appendix B, for “All algebraic operations except <code>/</code> produce exact values given exact inputs” read “The algebraic operations <code>+</code>, <code>-</code>, <code>*</code>, and <code>expt</code> where the second argument is a non-negative integer all produce exact values given exact inputs”.</p>
</li>
<li>
<p>In Appendix A, the <code>(scheme r5rs)</code> library should export <code>syntax-rules</code>, <code>else</code>, <code>...</code>, <code>=></code> and <code>_</code>.</p>
</li>
<li>
<p>In the definition of <code>string-for-each</code>, for “the elements of the <em>lists</em>” read “the elements of the <em>strings</em>”.</p>
</li>
<li>
<p>The value of the example <code>(real? 2.5+0.0i)</code> in Section 6.2.6 is shown as <code>#f</code>, as in R6RS.  This contradicts the prose explanation.  No resolution of the conflict has been reached as yet.</p>
</li>
<li>
<p>In the definition of <code>char-foldcase</code>, the sentence “If the argument is an uppercase letter, the result will be either a lowercase letter or the same as the argument if the lowercase letter does not exist or is not supported by the implementation” is no longer appropriate as of Unicode 8.0, when folding began to convert Cherokee lower-case letters to upper case.  Replace it with “If the result of folding is not supported by the implementation, the argument is returned”.</p>
</li>
<li>
<p>In the definition of &lt;feature requirement> in Section 7.1.7, for &lt;library name> read <code>(library </code>&lt;library name><code>)</code>.</p>
</li>
<li>
<p>The claim in the definition of <code>current-second</code> that the TAI-UTC offset as of January 1, 1970 was ten seconds is factually incorrect per <a href="http://maia.usno.navy.mil/ser7/tai-utc.dat" class="external">the USNO’s list of offsets<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>.  The correct value for that date is 8.000082 seconds.</p>
</li>
<li>
<p>The definition of <code>char-numeric?</code> refers to a nonexistent Unicode property Numeric_Digit. The intention was to refer to characters whose Numeric_Type property is Decimal, which is defined by Unicode as those which have a non-empty value in field 6 of the UnicodeData.txt file. This is equivalent to characters with a General Category of <code>Nd</code>. The simplest fix is to change the relevant paragraph of Section 6.6 from “Numeric_Digit” to “Numeric_Type=Decimal”.  (Note: R6RS uses the term “Numeric”, which also is not a Unicode property.)</p>
</li>
<li>
<p>In Section 6.5 (Symbols), the procedure <code>symbol=?</code> is defined to return <code>#t</code> if all the arguments are symbols and all have the same names in the sense of <code>string=</code>. The words “are all symbols and” incorrectly suggest that the value is <code>#f</code> if at least one argument is not a symbol.  In fact it is an error to apply <code>symbol=?</code> to non-symbols.  This is directly analogous to erratum 3.</p>
</li>
<li>
<p>Notes that the categories Lu, Ll, … Co that are valid in identifiers apply only to <em>non-ASCII</em> characters; the valid ASCII characters are given explicitly.</p>
</li>
<li>
<p>In section 1.1, the sentence “Each use of a variable is associated with a lexically apparent binding of that variable” appears. However, this is only true after macroexpansion, as the binding may be hidden in a user-written macro.  Prefix the sentence with “After macros are expanded”.</p>
</li>
<li>
<p>In the third paragraph of the definition of <code>null-environment</code>, the reference to <code>scheme-report-environment</code> should be to <code>null-environment</code>, and is changed accordingly.</p>
</li>
<li>
<p>In Section 4.3.3 (Signaling errors in macro transformers) the example <code>simple-let</code> macro does not do what it appears to do: it will only trigger the syntax-error if the incorrect binding form is the last binding form in the list.</p>
</li>
</ol></article></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false}"></div><svg version="1.1" id="global-graph-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
	s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
	c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
	C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
	c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
	v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
	s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
	C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
	S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
	s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
	s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true}"></div></div></div><div class="backlinks"><h3>Backlinks</h3><ul class="overflow"><li><a href="../spec/R7RS-Small-Specification" class="internal">R7RS-Small Specification</a></li></ul></div></div></div><footer class><hr/><p>© 2024 David N Main. This work is licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="license noopener noreferrer" style="display:inline-block;"> CC BY-NC-SA 4.0</a></p></footer></div></body><script type="application/javascript">function c(){let t=this.parentElement;t.classList.toggle("is-collapsed");let l=t.classList.contains("is-collapsed")?this.scrollHeight:t.scrollHeight;t.style.maxHeight=l+"px";let o=t,e=t.parentElement;for(;e;){if(!e.classList.contains("callout"))return;let n=e.classList.contains("is-collapsed")?e.scrollHeight:e.scrollHeight+o.scrollHeight;e.style.maxHeight=n+"px",o=e,e=e.parentElement}}function i(){let t=document.getElementsByClassName("callout is-collapsible");for(let s of t){let l=s.firstElementChild;if(l){l.addEventListener("click",c),window.addCleanup(()=>l.removeEventListener("click",c));let e=s.classList.contains("is-collapsed")?l.scrollHeight:s.scrollHeight;s.style.maxHeight=e+"px"}}}document.addEventListener("nav",i);window.addEventListener("resize",i);
</script><script type="module">
          let mermaidImport = undefined
          document.addEventListener('nav', async () => {
            if (document.querySelector("code.mermaid")) {
              mermaidImport ||= await import('https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.7.0/mermaid.esm.min.mjs')
              const mermaid = mermaidImport.default
              const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
              mermaid.initialize({
                startOnLoad: false,
                securityLevel: 'loose',
                theme: darkMode ? 'dark' : 'default'
              })

              await mermaid.run({
                querySelector: '.mermaid'
              })
            }
          });
          </script><script src="../postscript.js" type="module"></script></html>